@import url('https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&display=swap');
@import '../../widget/src/styles/themes/normal';
@import '../../widget/src/styles/themes/compact';
@import '../../widget/src/styles/themes/classic';

@import '../../widget/src/styles/color_schemes';

@base: #1e1e2e;
@mantle: #181825;
@crust: #11111b;
@surface0: #313244;
@surface1: #45475a;
@text: #fafafa;
@green: #a6e3a1;

@text: #cdd6f4;
@subtext0: #a6adc8;
@overlay0: #6c7086;

@blue: #89b4fa;
@peach: #fab387;
@red: #f38ba8;

@gap-1: 6px;
@gap-2: 12px;

@padding-dialog: 20px;

@radius-1: 6px;
@radius-2: 12px;
@radius-dialog: 20px;

* {
  padding: 0;
  margin: 0;
  font-family: 'DM Sans', sans-serif;
}

body {
  color: @text;
  background: @base;
}

input,
select,
button {
  color: @text;
  border: 1px solid fade(@surface0, 0%);
  background: @base;
  padding: 6px 9px;
  border-radius: @radius-2;
  outline: none;
  transition: 0.2s;
  width: 100%;
  box-sizing: border-box;
  margin: @gap-1 0;

  &:focus {
    border: 1px solid @surface1;
  }
}

button {
  cursor: pointer;

  &:hover {
    background-color: @surface0;
  }
}

.buttons {
  display: flex;
  gap: @gap-1;

  button {
    flex: 1;
  }
}

main {
  margin: auto;
  display: flex;
  gap: @gap-2;

  width: 70%;
  max-height: 100vh;

  iframe {
    border: 0;
    width: 400px;
  }

  hr {
    border: none;
    border-right: 1px solid @surface0;
    border-bottom: 1px solid @surface0;
  }

  input {
    padding: 6px 9px;
  }

  section {
    flex: 1;
  }

  button:disabled {
    color: @overlay0;
    border: 1px solid @surface0;
    cursor: not-allowed;
  }
}

.separator {
  display: flex;
  align-items: center;
  width: 100%;

  font-weight: bold;

  hr {
    margin: 0 0 0 6px;
    flex: 1;
  }

  margin-bottom: 6px;
}

.setting {
  margin: 6px 0;

  &.generate {
    max-width: 500px;
  }

  &.stats {
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-gap: 6px;

    .setting {
      margin: 0 !important;
    }
  }
}

.settings {
  padding: 12px 16px;
  margin: 12px 0;
  border-radius: @radius-2;
  background-color: @mantle;
}

header {
  margin: 6px auto auto auto;
  width: 70%;
  box-sizing: border-box;
}

header,
footer {
  display: flex;
  flex-direction: column;
  justify-content: center;
  text-align: center;
}

footer {
  flex-direction: row;
  justify-content: space-between;
  border-top: 1px solid @surface0;
  padding: 12px;
  margin-bottom: 6px;

  & > div {
    text-align: left;
    display: flex;
    flex-direction: column;

    &:last-child {
      text-align: right;
    }
  }
}

a {
  color: @blue;
  text-decoration: none;

  &:hover,
  &:focus {
    color: darken(@blue, 5%);
  }
}

section.preview {
  display: flex;
  min-width: 490px;
  max-width: 490px;
  flex-direction: column;
  justify-content: flex-start;

  hr {
    margin: @gap-1 0;
  }
}

div.preview {
  padding: 20px;
  border-radius: @radius-2;
  background: var(--preview-background);
  background-repeat: no-repeat;
  background-position: center;
  background-size: cover;

  &.radar-theme .wrapper {
    max-height: 325px;
  }
}

@media only screen and (max-width: 1500px) {
  main,
  header {
    width: 95%;
  }
}

@media only screen and (max-width: 1000px) {
  main {
    box-sizing: border-box;
    width: 100%;
    height: auto;
    max-height: initial;
    flex-direction: column-reverse;

    section.preview {
      min-width: 100%;
      box-sizing: border-box;
      margin-left: 0;
    }

    div.preview {
      width: 100%;
      box-sizing: border-box;
    }
  }

  header {
    width: 100%;
  }
}

.checkbox {
  display: flex;
  align-items: center;
  cursor: pointer;
  user-select: none;

  .check {
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    @size: 18px;
    min-width: @size;
    min-height: @size;
    max-width: @size;
    max-height: @size;
    border-radius: @radius-1;
    background-color: @base;
    margin-right: @gap-1;
    transition: 0.1s;

    svg.icon {
      opacity: 0;
      margin-right: 0;
      transition: 0.2s;
    }

    &.checked {
      background: fade(@green, 10%);

      svg {
        color: @green;
        opacity: 1;
      }
    }
  }

  &:hover {
    .check {
      background-color: @surface0;
    }

    .check.checked {
      background: fade(@green, 20%);
    }
  }
}

.color-picker {
  display: flex;
  justify-content: space-between;
  align-items: center;

  input {
    width: 30px;
    height: 15px;
    padding: 0;
    border: 1px solid @surface0;
    outline: none;
    margin: 1px 0;

    &::-moz-color-swatch {
      border: none;
    }

    &::-webkit-color-swatch-wrapper {
      padding: 0;
    }

    &::-webkit-color-swatch {
      border: none;
    }
  }
}

.checkbox,
.color-picker {
  svg.icon-tabler-help {
    position: relative;
    top: 3px;
    width: 1rem;
    height: 1rem;
  }
}

.width-100 {
  width: 100%;
}

nav {
  display: flex;
  border-radius: @radius-2;
  padding: @gap-1;
  gap: @gap-1;
  background-color: @mantle;

  button {
    border: none !important;
    border-radius: @radius-2;
    padding: 8px;
    margin: 0;
    background-color: @mantle;

    &:hover {
      background-color: @base;
    }

    &.active {
      font-weight: bold;
      background-color: @surface0;
    }
  }
}

.info-box(@color) {
  display: flex;
  align-items: center;
  padding: 6px 12px;
  border-radius: @radius-2;
  background: fade(@color, 5%);
  margin: 6px 0;

  svg.icon {
    color: @color;
  }

  p {
    color: @text;
  }

  gap: @gap-1;
}

.box {
  svg.icon {
    position: relative;
    width: 1rem;
    min-width: 1rem;
    height: 1rem;
    min-height: 1rem;
  }

  &.info {
    .info-box(@blue);
  }

  &.warn {
    .info-box(@peach);
  }

  &.severe {
    .info-box(@red);
  }
}

dialog {
  display: flex;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) scale(0);
  opacity: 0;
  padding: @padding-dialog;
  visibility: hidden;

  transition: 0.25s;

  text-align: center;

  color: @text;

  border: 1px solid @base;
  border-radius: @radius-dialog;
  background: @mantle;

  &::backdrop {
    background: fade(@crust, 85%);
    backdrop-filter: blur(4px);
    transition: 0.2s;
  }

  &[open] {
    opacity: 1;
    transform: translate(-50%, -50%);
    visibility: visible;
  }

  &.generated .content,
  &.restore-defaults .content {
    width: 400px;
  }

  .modal-icon {
    &.success {
      color: @green;
    }

    &.warning {
      color: @peach;
    }

    .icon {
      margin-right: 0;
      @size: 48px;
      width: @size;
      height: @size;
    }
  }
}

.flex {
  display: flex;
  gap: @gap-1;

  & > div {
    flex: 1;
  }
}

.subtext {
  color: @subtext0;
}

.badge {
  color: @green !important;
  padding: 2px 6px;
  border-radius: @radius-1;
  font-size: 0.85em;
  background-color: fade(@green, 5%);
  margin-left: 0.4em;

  &.help {
    position: relative;
    padding: 2px;
    font-weight: bold;
    color: fade(@subtext0, 50%) !important;
    border: none;
    background: none;
  }
}

.player-avatar {
  width: 58px;
  height: 58px;
  aspect-ratio: 1/1;
  border-radius: 50%;
  border: none;
  margin-right: @gap-1;
  background-color: @base;
  display: flex;
  align-items: center;
  justify-content: center;
  color: @subtext0;
}

.tooltip {
  color: @text;
  position: absolute;
  background-color: fade(@crust, 90%);
  backdrop-filter: blur(12px);
  padding: @gap-2;
  top: @gap-2;
  left: @gap-2;
  border-radius: @radius-2;
  transition: 0.2s;
  transform-origin: top left;
  opacity: 1;
  pointer-events: none;
  width: 250px;
  z-index: 100;
  font-weight: normal;

  img {
    width: 100%;
    border-radius: @radius-2;
    background-color: @mantle;
  }

  &.hidden {
    opacity: 0;
    visibility: hidden;
  }
}
